<!doctype html>
<html lang="fo">
<head>
  <meta charset="utf-8">

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;1,500&family=Inter:wght@500&display=swap" rel="stylesheet">

  <!-- https://github.com/macbre/faroese-resources/blob/master/data/villages.json -->
  <meta name=‚Äùgeo.position‚Äù content="62.0467, -6.7694">

  <style>
	html, body { margin: 0; padding: 0 }

	#wrapper {
		width: 1067px;
		height: 600px;
		overflow: hidden;
	}

	article {
		background-color: #3972e0;
		position: relative;
		height: 100%;
		font-family: "EB Garamond";
	}

	#overlay {
	    width: 100%;
	    height: 100%;
		_background-image: url(image.jpg);
		background-image: url(
			https://live.staticflickr.com/65535/52646737711_51ee62a13a_o_d.jpg
		);
		background-size: cover;
		background-position: 0 100%;

		/* filters  */
		_filter: grayscale(.2) sepia(.3) contrast(0.99) saturate(1.6);
		_filter: saturate(1.05) brightness(1.2) contrast(1.15);
		_filter: brightness(1.2) contrast(1.25) saturate(0.9);
		_filter: brightness(1.5) saturate(1) contrast(1.1);
		_filter: contrast(1.1) saturate(1.1) brightness(1.15) opacity(0.9);
		_filter: brightness(1.1) contrast(0.8) saturate(1.2);
		_filter: contrast(1.25) saturate(1.1) hue-rotate(3deg);
		_filter: contrast(1.05) saturate(1.2) brightness(1.05) hue-rotate(8deg);
		filter: contrast(.95) opacity(0.9) brightness(1.15);

		/* sizes / default with is 1067px  */
		width: 1500px;
		_background-size: inherit;
		background-position: -330px 40%;
	}

	dl {
		position: absolute;
		margin: 0;
		padding: 50px;
		padding-top: 75px;
		bottom: 0;
		left: 0;
		width: 967px;
		background: linear-gradient(180deg, rgba(50,50,50,0) 0%, rgba(50,50,50,0.15) 25%, rgba(50,50,50,.25) 100%);
		text-shadow: 0 0 10px black;
		opacity: .85;
		color: #fff;
	}

	dt {
		font-family: Inter;
		font-weight: bold;
		font-size: 85px;
		letter-spacing: -2px;
	}

	dt em {
		font-style: normal;
	}

	.kind, .ipa {
		font-size: 20px;
		font-family: "EB Garamond";
		font-weight: normal;
		margin-left: 25px;
		letter-spacing: 0;
	}

	.kind {
		font-size: 40px;
	}

	.ipa {
		font-size: 35px;
		font-style: italic;
		font-family: sans-serif;
		letter-spacing: 1px;
	}

	dd {
		font-size: 55px;
	}

	/* hidden word */
/* 	dt em {
		visibility: hidden;
	} */

	#logo {
		filter: invert(1) grayscale(1) opacity(0.4);
		width: 500px;
		position: absolute;
		right: -150px;
		bottom: -150px;
		transform: rotate(-45deg);

		display: none;
	}

	/* word at the top */
	.up dl {
		top: 0;
		bottom: auto;
		padding-top: 50px;
  		background: linear-gradient(0deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.05) 5%, rgba(0,0,0,.2) 100%);
	}

        #map { display: none }

        #map.leaflet-container {
		display: block;
		width: 450px;
		height: 450px;
		position: absolute;
		top: -105px;
		/* right: -105px; */
		left: 714px;
		border-radius: 0 0 0 100%;

		opacity: .85;
		filter: saturate(0.75);
		_outline: solid 10px rgba(255,255,255, 0.5);
		border: solid 10px rgba(255, 255, 255, 0.75);
		border-top: none;
		border-right: none;
	}

	#map .contrib {
		z-index: 500;
		position: absolute;
		bottom: 95px;
		right: 20px;
		background: rgba(255,255,255,.9);
		display: block;
		padding: .5em 1em;
		font-family: Inter;
		letter-spacing: -0.5px;
		font-size: 14px;
		color: #333;
		transform: rotateZ(90deg);
	}

	#map .leaflet-control-container {
		display: none;
	}

	/* 
	 ********************************************************************************************************************************************
Instagram landscape photo: 1080 x 608 px (1.91:1 ratio)
At a standard width of 1080 pixels, Instagram keeps your photo its original size
	 */
	body.instagram #wrapper {
		width: 1080px;
		height: 1080px;
		background-color: rgba(114, 149, 190, 1);
	}

	body.instagram #logo {
		filter: invert(1) opacity(0.4);
		/* filter: invert(0) opacity(0.4); */
		/* background-blend-mode: lighten; */
		width: 450px;
		position: absolute;
		left: -150px;
		top: -150px;
		transform: rotate(-45deg);
		display: block;
	}

	body.instagram #overlay {
		opacity: 0.9;
		width: 1600px;
		height: 1600px;
		background-position: 100% -475px; /** <-------------- **/
		height: 1800px;
		/*height: 1080px; */

		/* filter: contrast(1.3) brightness(1.2) saturate(1.2); */
		filter: contrast(.9) saturate(1.15);
		/* filter: contrast(1.5) saturate(1.1); */
		/* filter: contrast(1.4) hue-rotate(-3deg) saturate(1.1); */
	}

	body.instagram dl {
		width: 1080px;
		padding-bottom: 120px;
		text-shadow: none;
		background: linear-gradient(180deg, rgba(114, 149, 190,0) 0%, rgba(114, 149, 190,0.1) 15%, rgba(114, 149, 190,.25) 100%);

		/** padding-bottom: 350px; /** <-------------- */
	}

	body.instagram article.up dl {
		top: auto;
		bottom: 0;
	}

	body.instagram article dt {
		transform: rotate(-4deg);
		transform-origin: left;
		z-index: 2;
		position: relative;
	}

	/* the Faroese word */
	body.instagram article dt em {
		font-size: 150px;
		background-color: rgba(114, 149, 190, .85);
		padding: 5px 35px;
		display: inline-block;
		border-bottom: solid 8px rgba(114, 149, 190, .85);
		letter-spacing: -0.06em;
	}

	body.instagram article dt .kind {
		background-color: rgba(19, 43, 70, .9);
		padding: 5px 15px;
		display: inline-block;
		font-size: 45px;
		position: relative;
		top: -140px;
		left: -95px;
		transform: rotate(2deg);
	}

	/* the translations / meaning */
	body.instagram article dd[lang="pl"] {
		font-size: 90px;
		background-color: rgba(114, 149, 190, .75);
		padding: 5px 35px;
		display: inline-block !important;
		transform: rotate(3deg);
		transform-origin: left;
		margin-top: -30px;
		letter-spacing: -0.02em;
	}

	body.instagram .instagram-ipa {
		color: #fff;
		background-color: rgba(19, 43, 70, .75);
		display: block !important;
		position: absolute;
		bottom: 0px;
		left: 0px;
		font-size: 30px;
		/* font-family: 'Times New Roman', Times, serif; */
		font-family: sans-serif;
		/* text-shadow: 0 0 10px black; */
		padding: .2em .5em;
	}

	body.instagram .instagram-ipa::before {
		content: 'üí¨';
		font-size: 0.8em;
    	vertical-align: middle;
	}

	body.instagram .ipa {
		display: none;
	}

	body.instagram #map.leaflet-container {
		left: 727px;
	}

	/* word at the top *//*
	body.instagram .up dl {
		padding-top: 125px;
		background: none;
	}

	body.instagram .up .ipa {
		top: -100px;
		left: 0;
		right: auto;
	} */

	/* hide Polish by default */
	*[lang="pl"] {
		display: none;
	}

	body.instagram *[lang="en"] {
		display: none;
	}

	body.instagram *[lang="pl"] {
		display: block;
	}
/* 
	body.instagram dl {
		padding-bottom: 400px;
	}

	body.instagram .ipa {
		bottom: calc(-235px - 280px);
		right: 120px;
	} */
  </style>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
  <script type="text/javascript" src="https://stamen-maps.a.ssl.fastly.net/js/tile.stamen.js?v1.3.0"></script>

</head>

<body _class="instagram">
<div id="wrapper">
<article _class="up">
<div id="overlay"></div>
<img id="logo" src="logo.png" />
<dl>
<dt>
<em>Hv√≠tanes</em>
<!--
	k	kallkyn; masculine
	kv	kvennkyn; feminine
	h	hv√∏rkikyn; neuter
	flt fleirtal; plural
-->
<span class="kind">h</span>
<span class="ipa"><!-- https://en.wikipedia.org/wiki/Faroese_language -->
kv äitaneÀês
</span>
</dt>
<dd lang="en">
White Headland
</dd>
<dd lang="pl">
Bia≈Çy PrzylƒÖdek
</dd>
</dl>
<div id="map">
<span class="contrib">
Map tiles by <a href="http://stamen.com">Stamen Design</a><!--, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>-->.
</span>
</div>
<span class="instagram-ipa" style="display: none;"></span>
</article></div>

<script>
(function() {
  // update page title
  const word = document.querySelector('em').textContent;
  document.title = word + ' - faroeseword';

  // rotate the tiles for instagram
  function rotateTheTiles() {
  	const code = word.charCodeAt(0);
	const rotation = (code % 16) - 10;
	// const rotation = -12;

	try {
		document.querySelector('body.instagram article dt').style.transform = `rotate(${rotation}deg)`;
		document.querySelector('body.instagram article dd[lang="pl"]').style.transform = `rotate(${rotation + 5}deg)`;
	} catch (ex) {}

	console.log('Rotation', rotation);
  }

  rotateTheTiles();

  window.onresize = rotateTheTiles;

  // and move IPA around in the DOM
  document.querySelector('article .instagram-ipa').textContent = document.querySelector('body .ipa').textContent;
})();

(function() {
  const geo = document.querySelector('meta[name]');

  if (!geo) return;
  console.log('geo', geo);

  const [lat, lon] = geo.getAttribute('content').split(' ').map(parseFloat);
  console.log([lat, lon]);

  // http://maps.stamen.com/#toner/12/37.7706/-122.3782
//   const center = [lat - 0.05, lon + 0.3]; const zoom = 8;// from the pin
//   const center = [62.011667, -6.7675]; const zoom = 8;// T√≥rshavn

  const center = [(62.011667 + lat) / 2, (-6.7675 + lon) / 2]; const zoom = 8;// between T√≥rshavn and the pin
  const map = L.map('map').setView(center, zoom);
  L.marker([lat, lon]).addTo(map);

  // https://leaflet-extras.github.io/leaflet-providers/preview/#filter=Stamen.Watercolor
  // migrate to:
  // https://watercolormaps.collection.cooperhewitt.org/tile/watercolor/12/1205/1539.jpg
  // @see https://maps.stamen.com/stadia-partnership/
  var tiles = L.tileLayer('https://watercolormaps.collection.cooperhewitt.org/tile/watercolor/{z}/{x}/{y}.{ext}', {
	attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
	subdomains: 'abcd',
	minZoom: 1,
	maxZoom: 16,
	ext: 'jpg'
  });

  tiles.addTo(map);

/**
  var tiles = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
	maxZoom: 18,
	// attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, ' +
	// 'Imagery ¬© <a href="https://www.mapbox.com/">Mapbox</a>',
	id: 'mapbox/streets-v11',
	tileSize: 512,
	zoomOffset: -1
  }).addTo(map);
**/

})();
</script>

</body>
</html>
